<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrintStack Cross-Browser Compatibility Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .feature-test { margin: 10px 0; padding: 10px; background: #f9f9f9; }
        .pass { color: #28a745; font-weight: bold; }
        .fail { color: #dc3545; font-weight: bold; }
        .unknown { color: #ffc107; font-weight: bold; }
        .browser-info { background: #e9ecef; padding: 10px; margin-bottom: 20px; }
        .checklist input { margin-right: 10px; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .test-result { display: inline-block; margin-left: 10px; }
        button { padding: 8px 16px; margin: 5px; cursor: pointer; }
        .note { font-style: italic; color: #666; margin: 5px 0; }
    </style>
</head>
<body>
    <h1>PrintStack Cross-Browser Compatibility Test</h1>

    <div class="browser-info" id="browserInfo">
        <h3>Browser Information</h3>
        <p><strong>User Agent:</strong> <span id="userAgent"></span></p>
        <p><strong>Browser:</strong> <span id="browserName"></span></p>
        <p><strong>Version:</strong> <span id="browserVersion"></span></p>
        <p><strong>Platform:</strong> <span id="platform"></span></p>
    </div>

    <div class="test-section">
        <h2>âœ… Manual Test Checklist</h2>
        <p>Complete these tests in each target browser:</p>

        <h3>Target Browsers</h3>
        <ul>
            <li>Chrome/Edge 90+</li>
            <li>Firefox 88+</li>
            <li>Safari 14+</li>
            <li>Opera 76+</li>
        </ul>

        <h3>Core Functionality Tests</h3>
        <div class="checklist">
            <label><input type="checkbox"> Page loads successfully with all assets</label><br>
            <label><input type="checkbox"> Navigation between tabs works</label><br>
            <label><input type="checkbox"> Add/Edit/Delete Filament operations</label><br>
            <label><input type="checkbox"> Add/Edit/Delete Model operations</label><br>
            <label><input type="checkbox"> Add/Edit/Delete Print operations</label><br>
            <label><input type="checkbox"> Search/Filter functionality works</label><br>
            <label><input type="checkbox"> Import/Export functionality works</label><br>
            <label><input type="checkbox"> Statistics page displays correctly</label><br>
        </div>

        <h3>Enhanced Features Tests</h3>
        <div class="checklist">
            <label><input type="checkbox"> Material type dropdown with custom option</label><br>
            <label><input type="checkbox"> Hex color picker and validation</label><br>
            <label><input type="checkbox"> Temperature range inputs</label><br>
            <label><input type="checkbox"> Usage tracking and variance analysis</label><br>
            <label><input type="checkbox"> Accessibility features (ARIA labels, keyboard nav)</label><br>
            <label><input type="checkbox"> Progressive enhancement (works without JS)</label><br>
        </div>

        <h3>Performance Tests</h3>
        <div class="checklist">
            <label><input type="checkbox"> Page loads in <2 seconds</label><br>
            <label><input type="checkbox"> Form submissions complete in <100ms</label><br>
            <label><input type="checkbox"> Large datasets (1000+ records) handle smoothly</label><br>
            <label><input type="checkbox"> Search operations complete in <100ms</label><br>
        </div>
    </div>

    <div class="test-section">
        <h2>ðŸ”§ Automated Feature Detection</h2>
        <div id="feature-test-results"></div>
    </div>

    <div class="test-section">
        <h2>ðŸŽ¯ Interactive Tests</h2>
        <button onclick="testLocalStorage()">Test LocalStorage</button>
        <button onclick="testFormValidation()">Test Form Validation</button>
        <button onclick="testColorPickerSupport()">Test Color Picker</button>
        <button onclick="testTableOperations()">Test Table Operations</button>
        <button onclick="testPerformance()">Test Performance</button>
        <div id="interactive-results"></div>
    </div>

    <div class="test-section">
        <h2>ðŸ“Š Test Results Summary</h2>
        <div id="summary"></div>
        <button onclick="generateReport()">Generate Compatibility Report</button>
    </div>

    <script>
        // Browser detection
        function getBrowserInfo() {
            const ua = navigator.userAgent;
            let browserName = 'Unknown';
            let browserVersion = 'Unknown';

            if (ua.indexOf('Chrome') > -1) {
                browserName = 'Chrome';
                browserVersion = ua.match(/Chrome\/(\d+)/)?.[1] || 'Unknown';
            } else if (ua.indexOf('Safari') > -1) {
                browserName = 'Safari';
                browserVersion = ua.match(/Safari\/(\d+)/)?.[1] || 'Unknown';
            } else if (ua.indexOf('Firefox') > -1) {
                browserName = 'Firefox';
                browserVersion = ua.match(/Firefox\/(\d+)/)?.[1] || 'Unknown';
            } else if (ua.indexOf('Edge') > -1) {
                browserName = 'Edge';
                browserVersion = ua.match(/Edge\/(\d+)/)?.[1] || 'Unknown';
            }

            document.getElementById('userAgent').textContent = ua;
            document.getElementById('browserName').textContent = browserName;
            document.getElementById('browserVersion').textContent = browserVersion;
            document.getElementById('platform').textContent = navigator.platform;
        }

        // Feature detection tests
        const featureTests = [
            {
                name: 'LocalStorage Support',
                test: () => typeof(Storage) !== 'undefined' && localStorage !== null
            },
            {
                name: 'JSON Support',
                test: () => typeof(JSON) !== 'undefined' && JSON.parse && JSON.stringify
            },
            {
                name: 'CSS Grid Support',
                test: () => CSS.supports('display', 'grid')
            },
            {
                name: 'Flexbox Support',
                test: () => CSS.supports('display', 'flex')
            },
            {
                name: 'Color Input Support',
                test: () => {
                    try {
                        const input = document.createElement('input');
                        input.type = 'color';
                        return input.type === 'color';
                    } catch (e) {
                        return false;
                    }
                }
            },
            {
                name: 'Number Input Support',
                test: () => {
                    try {
                        const input = document.createElement('input');
                        input.type = 'number';
                        return input.type === 'number';
                    } catch (e) {
                        return false;
                    }
                }
            },
            {
                name: 'ES6 Arrow Functions',
                test: () => {
                    try {
                        eval('() => {}');
                        return true;
                    } catch (e) {
                        return false;
                    }
                }
            },
            {
                name: 'ES6 Template Literals',
                test: () => {
                    try {
                        eval('`test`');
                        return true;
                    } catch (e) {
                        return false;
                    }
                }
            },
            {
                name: 'Performance API',
                test: () => typeof performance !== 'undefined' && performance.now
            },
            {
                name: 'Fetch API',
                test: () => typeof fetch !== 'undefined'
            }
        ];

        function runFeatureTests() {
            const container = document.getElementById('feature-test-results');
            container.innerHTML = '';

            featureTests.forEach(feature => {
                const result = feature.test();
                const statusClass = result ? 'pass' : 'fail';
                const statusText = result ? 'PASS' : 'FAIL';

                container.innerHTML += `
                    <div class="feature-test">
                        <strong>${feature.name}:</strong>
                        <span class="test-result ${statusClass}">${statusText}</span>
                    </div>
                `;
            });
        }

        // Interactive tests
        function testLocalStorage() {
            try {
                const testKey = 'printstack_browser_test';
                const testValue = { test: 'data', timestamp: Date.now() };

                localStorage.setItem(testKey, JSON.stringify(testValue));
                const retrieved = JSON.parse(localStorage.getItem(testKey));
                localStorage.removeItem(testKey);

                if (retrieved && retrieved.test === 'data') {
                    addInteractiveResult('LocalStorage', 'PASS', 'Read/write operations successful');
                } else {
                    addInteractiveResult('LocalStorage', 'FAIL', 'Data corruption detected');
                }
            } catch (error) {
                addInteractiveResult('LocalStorage', 'FAIL', `Error: ${error.message}`);
            }
        }

        function testFormValidation() {
            const form = document.createElement('form');
            form.innerHTML = `
                <input type="text" name="test" value="test value" required>
                <input type="email" name="email" value="test@example.com">
            `;

            try {
                const formData = new FormData(form);
                const isValid = form.checkValidity();
                addInteractiveResult('Form Validation', 'PASS', `Form validity: ${isValid}`);
            } catch (error) {
                addInteractiveResult('Form Validation', 'FAIL', `Error: ${error.message}`);
            }
        }

        function testColorPickerSupport() {
            try {
                const input = document.createElement('input');
                input.type = 'color';
                const result = input.type === 'color';
                addInteractiveResult('Color Picker', result ? 'PASS' : 'FAIL',
                    result ? 'Color input type supported' : 'Color input not supported');
            } catch (error) {
                addInteractiveResult('Color Picker', 'FAIL', `Error: ${error.message}`);
            }
        }

        function testTableOperations() {
            try {
                const table = document.createElement('table');
                table.innerHTML = `
                    <thead><tr><th>Test</th></tr></thead>
                    <tbody><tr><td>Data</td></tr></tbody>
                `;
                document.body.appendChild(table);

                const rows = table.querySelectorAll('tr');
                document.body.removeChild(table);

                if (rows.length > 0) {
                    addInteractiveResult('Table Operations', 'PASS', `Found ${rows.length} table rows`);
                } else {
                    addInteractiveResult('Table Operations', 'FAIL', 'No table rows found');
                }
            } catch (error) {
                addInteractiveResult('Table Operations', 'FAIL', `Error: ${error.message}`);
            }
        }

        function testPerformance() {
            if (typeof performance !== 'undefined' && performance.now) {
                const start = performance.now();
                setTimeout(() => {
                    const duration = performance.now() - start;
                    const status = duration < 100 ? 'PASS' : 'FAIL';
                    addInteractiveResult('Performance', status, `${duration.toFixed(2)}ms for simple operation`);
                }, 10);
            } else {
                addInteractiveResult('Performance', 'FAIL', 'Performance API not available');
            }
        }

        function addInteractiveResult(testName, status, message) {
            const container = document.getElementById('interactive-results');
            const statusClass = status.toLowerCase();
            container.innerHTML += `
                <div class="feature-test">
                    <strong>${testName}:</strong>
                    <span class="test-result ${statusClass}">${status}</span> - ${message}
                </div>
            `;
        }

        function generateReport() {
            const checkboxes = document.querySelectorAll('.checklist input[type="checkbox"]');
            const total = checkboxes.length;
            const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
            const percentage = total > 0 ? Math.round((checked / total) * 100) : 0;

            const summary = document.getElementById('summary');
            summary.innerHTML = `
                <div class="feature-test">
                    <h3>Test Completion Summary</h3>
                    <p><strong>Manual Tests:</strong> ${checked}/${total} completed (${percentage}%)</p>
                    <p><strong>Status:</strong> ${percentage >= 80 ?
                        '<span class="pass">PASS - Good compatibility</span>' :
                        '<span class="fail">FAIL - Issues detected</span>'}</p>
                    <div class="note">Note: Complete manual tests for full compatibility assessment</div>
                </div>
            `;
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            getBrowserInfo();
            runFeatureTests();
        });
    </script>
</body>
</html>