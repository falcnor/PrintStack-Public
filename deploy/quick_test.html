<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrintStack Quick Deployment Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .pass { color: #28a745; font-weight: bold; }
        .fail { color: #dc3545; font-weight: bold; }
        button {
            padding: 8px 16px;
            margin: 5px;
            cursor: pointer;
            border: none;
            border-radius: 3px;
            background: #007bff;
            color: white;
        }
        button:hover { background: #0056b3; }
        #results { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>PrintStack Deployment Quick Test</h1>
    <p>This page will help you verify that the enhanced PrintStack is working correctly.</p>

    <div class="test-section">
        <h2>ðŸ§ª Quick Tests</h2>
        <button onclick="testBasicFunctionality()">Test Basic Functionality</button>
        <button onclick="testLocalStorage()">Test LocalStorage</button>
        <button onclick="testEnhancedFeatures()">Test Enhanced Features</button>
        <button onclick="runAllTests()">Run All Tests</button>
        <button onclick="openMainApp()">Open Main Application</button>
    </div>

    <div id="results"></div>

    <script>
        function testBasicFunctionality() {
            const results = document.getElementById('results');
            results.innerHTML = '';

            // Test 1: JavaScript Working
            try {
                const testVar = 'JavaScript is working';
                addResult('JavaScript Engine', 'PASS', testVar);
            } catch (e) {
                addResult('JavaScript Engine', 'FAIL', e.message);
            }

            // Test 2: LocalStorage Available
            try {
                localStorage.setItem('test', 'working');
                const result = localStorage.getItem('test');
                localStorage.removeItem('test');
                addResult('LocalStorage', 'PASS', 'Read/write successful');
            } catch (e) {
                addResult('LocalStorage', 'FAIL', e.message);
            }

            // Test 3: Modern JavaScript Features
            try {
                const arrow = () => 'ES6+ features working';
                const template = `Template literals working`;
                addResult('Modern JavaScript', 'PASS', `${arrow()} - ${template}`);
            } catch (e) {
                addResult('Modern JavaScript', 'FAIL', e.message);
            }
        }

        function testLocalStorage() {
            const results = document.getElementById('results');
            results.innerHTML = '';

            try {
                // Test basic storage
                const testData = {
                    filaments: [{ id: 1, brand: 'Test', materialType: 'PLA' }],
                    models: [{ id: 1, name: 'Test Model' }],
                    prints: [{ id: 1, weight: 25 }]
                };

                localStorage.setItem('printstackData', JSON.stringify(testData));
                const retrieved = JSON.parse(localStorage.getItem('printstackData'));

                if (retrieved.filaments && retrieved.models && retrieved.prints) {
                    addResult('Enhanced Data Storage', 'PASS', 'Complex data structure stored correctly');
                    localStorage.removeItem('printstackData');
                } else {
                    addResult('Enhanced Data Storage', 'FAIL', 'Data structure corrupted');
                }
            } catch (e) {
                addResult('Enhanced Data Storage', 'FAIL', e.message);
            }
        }

        function testEnhancedFeatures() {
            const results = document.getElementById('results');
            results.innerHTML = '';

            // Test color validation
            function isValidHexColor(hex) {
                return /^#[0-9A-Fa-f]{6}$/.test(hex);
            }

            const tests = [
                { color: '#FF0000', valid: true, desc: 'Valid red hex' },
                { color: '#00FF00', valid: true, desc: 'Valid green hex' },
                { color: '#0000FF', valid: true, desc: 'Valid blue hex' },
                { color: '#GGGGGG', valid: false, desc: 'Invalid hex' },
                { color: '#123', valid: false, desc: 'Too short hex' }
            ];

            tests.forEach(test => {
                const result = isValidHexColor(test.color);
                const status = result === test.valid ? 'PASS' : 'FAIL';
                addResult(`Color Validation: ${test.desc}`, status, `Expected: ${test.valid}, Got: ${result}`);
            });

            // Test material type validation
            const materialTypes = ['PLA', 'PETG', 'ABS', 'TPU'];
            addResult('Material Type System', 'PASS', `Available: ${materialTypes.join(', ')}`);
        }

        function runAllTests() {
            testBasicFunctionality();
            setTimeout(() => testLocalStorage(), 500);
            setTimeout(() => testEnhancedFeatures(), 1000);
        }

        function openMainApp() {
            window.open('index.html', '_blank');
        }

        function addResult(testName, status, message) {
            const results = document.getElementById('results');
            const statusClass = status.toLowerCase();
            results.innerHTML += `
                <div class="test-section">
                    <strong>${testName}:</strong>
                    <span class="${statusClass}">${status}</span><br>
                    <small>${message}</small>
                </div>
            `;
        }

        // Auto-run basic tests on load
        window.addEventListener('load', () => {
            setTimeout(testBasicFunctionality, 500);
        });
    </script>
</body>
</html>